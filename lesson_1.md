# Асинхронная архитектура. Урок 1


## Модель данных

![изображение](https://github.com/mechanicalmachine/asynchronous-architecture/assets/30704273/6af40576-650e-4461-bccb-a045a82fcdfe)

 [Модель данных в Miro](https://miro.com/app/board/uXjVMeJNVCk=/?moveToWidget=3458764579382916637&cot=14)


## ES диаграмма

 ![изображение](https://github.com/mechanicalmachine/asynchronous-architecture/assets/30704273/61e3c42a-5861-421e-9f89-6e5f3b0498b5)

 [ES диаграмма в Miro](https://miro.com/app/board/uXjVMeJNVCk=/?moveToWidget=3458764579362507590&cot=14)
 
## События в системе

### Business Event

В разрабатываемой системе существует только одно бизнес-событие - между доменом тасок и доменом аккаунтинга. Данное событие создается при изменении статуса таски в домене тасок, содержит id пользователя, id таски, новый статус таски и время изменения статуса. Соответственно продьюсером является - домен тасок, а консьюмером - домен аккаунтинга, который, при получении события, производит операции с балансом сотрудника

### CUD

В разрабатываемой системе будет существовать 2 CUD события:
  - при создании пользователя в домене авторизации отправляется событие о создании пользователя, соответственно продюсером выступает домен авторизации, а консьюмерами выступают все остальные домены: тасок, аккаунтинга и аналитики. В событие передается id пользователя, его ФИО (для отображения в таск-трекере), email (для отправки сообщений о сумме выплат), а также его роль для определения уровня доступа к остальным сервисам.
  - событие при списании или начислении денег на баланс пользователя. Продюсером служит домен аккаунтинга, а консьюмером - домен аналитики. Событие содержит информации о сотруднике, размер списания/начисления, тип операции (списания/начисления), а также дату операции.
